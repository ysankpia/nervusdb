# 教程 01 · 安装与环境

## 环境要求

- Node.js 18+（推荐 20+）
- ESM 模块（本包 `package.json: { "type": "module" }`）
- macOS/Linux/Windows 均可

## 作为库使用（项目内）

由于本项目暂未发布到公共 npm Registry，你可通过打包本地 tgz 的方式安装：

```bash
# 在仓库根目录打包
pnpm build && pnpm pack
# 生成的压缩包一般名为 synapsedb-<version>.tgz

# 在你的业务项目内安装该 tgz
npm i ./path/to/synapsedb-1.0.0.tgz
```

在业务项目中导入并使用：

```ts
import { SynapseDB } from 'synapsedb';

const db = await SynapseDB.open('brain.synapsedb', {
  enableLock: true,
});
db.addFact({ subject: 'A', predicate: 'knows', object: 'B' });
await db.flush();
await db.close();
```

注意：你的项目需为 ESM（`"type":"module"`），或使用打包器支持 ESM 导入。

## 全局 CLI 安装（开发者工具）

用于本地诊断/治理的命令行工具可通过 npm 全局安装当前仓库：

```bash
# 在本仓库根目录
pnpm build
npm i -g .

synapsedb --help
```

常用命令：

- `synapsedb bench <db> [N] [lsm]`：生成样本库并输出插入/查询耗时
- `synapsedb stats <db>`：总体统计
- `synapsedb auto-compact <db> [...options]`：增量/整序合并
- `synapsedb gc <db>`：页面级 GC
- `synapsedb check|repair <db>`：自检与修复
- 更多见《附录-CLI 参考》
