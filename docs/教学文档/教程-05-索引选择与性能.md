# 教程 05 · 索引选择与性能优化

## 六序索引与选择策略

- 顺序：SPO/SOP/POS/PSO/OSP/OPS
- 选择：优先覆盖前缀更长的顺序（如 s+p → SPO；p+o → POS）

## 分页与页大小（pageSize）

- pageSize 越大，单页吞吐更高，但内存与 I/O 粒度更粗
- 建议 1K~2K 区间按数据分布与场景评估

## 压缩

- `none` / `brotli:level(1~11)`
- 冷数据（rewrite）可用更高压缩；热主键增量重写可选低等级或不压缩

## 流式查询

- 避免一次性拉取大结果集：`streamFacts(criteria, batchSize)`
- CLI/服务端可结合 SSE/WebSocket 渐进返回

## 调优指引

- 合并模式：日常增量（incremental），定期 rewrite 提升压缩比
- 热度阈值：结合业务访问设置 `hot-threshold`；限制 TopK `max-primary`
- 生产建议：启用写锁 `enableLock`；尊重读者 `registerReader`
